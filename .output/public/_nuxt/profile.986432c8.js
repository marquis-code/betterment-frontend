import{r as m,B as S,n as $,o as f,c as y,a as e,J as P,s as _,K as k,F as M,E as A,v as x,t as v,y as B,p as C,e as I,_ as j,h as N,z as O,x as g,b as V}from"./entry.50b5a30e.js";import{u as D}from"./useUserInfo.58f74336.js";import{u as T}from"./user.3a31c8fb.js";function W(){const{user:c,token:t}=T(),u=m({}),o=m(!1);return{processing:o,updateAdmin:async(l,r)=>{var U;o.value=!0;const{id:n,Status:a,timeAdded:w,PlanType:p,...s}=r.value,i=`
      mutation updateUser($userId: String!, $input: UpdateUser!) {
        updateUser(userId: $userId, input: $input) {
          id
          name
          email
          Status
          PlanType
          accountBalance
          tradingBalance
          tradingBalance
          eth
          btc
          timeAdded
        }
      }
    `;try{const b=await(await fetch("https://clone-better.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${t.value}`},body:JSON.stringify({query:i,variables:{userId:l,input:s}})})).json();console.log(b,"datta jere"),(U=b==null?void 0:b.errors)!=null&&U.length&&S().$toast.success("Something went wrong",{autoClose:5e3,dangerouslyHTMLString:!0}),b.data&&S().$toast.success("User status was updated successfully",{autoClose:5e3,dangerouslyHTMLString:!0})}finally{o.value=!1}},payload:u}}const h=c=>(C("data-v-2d54d428"),c=c(),I(),c),E={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},q={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},z=h(()=>e("h2",{class:"text- font-semibold"},"Update Wallet Profits",-1)),L=["onSubmit"],F={class:"mt-4 space-y-1"},H=h(()=>e("label",{class:"block text-gray-700 text-sm"},"Select Wallet",-1)),J=h(()=>e("option",{disabled:"",value:""},"Choose a wallet",-1)),K=["value"],G={class:"mt-4 space-y-1"},Q=h(()=>e("label",{class:"block text-gray-700 text-sm"},"New Profit",-1)),R={class:"flex justify-end mt-10"},X=["disabled"],Y=$({__name:"UpdateProfitsModal",props:{isOpen:{type:Boolean},processing:{type:Boolean},wallets:{}},emits:["close","update"],setup(c,{emit:t}){const u=m(""),o=m(null),d=()=>{t("close")},l=()=>{if(!u.value||!o.value){alert("Please select a wallet and enter a profit amount.");return}console.log(),t("update",{walletAddress:u.value,profit:o.value}),d()};return(r,n)=>r.isOpen?(f(),y("div",E,[e("div",q,[e("div",{class:"flex justify-between items-center"},[z,e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},"Ã—")]),e("form",{onSubmit:P(l,["prevent"])},[e("div",F,[H,_(e("select",{"onUpdate:modelValue":n[0]||(n[0]=a=>u.value=a),class:"w-full px-4 py-3.5 text-sm bg-gray-100 outline-none border rounded-md"},[J,(f(!0),y(M,null,A(r.wallets,a=>(f(),y("option",{key:a.address,value:a.address},v(a.name)+" ("+v(a.address)+") ",9,K))),128))],512),[[k,u.value]])]),e("div",G,[Q,_(e("input",{"onUpdate:modelValue":n[1]||(n[1]=a=>o.value=a),type:"number",class:"w-full px-4 py-3.5 text-sm bg-gray-100 outline-none border rounded-md"},null,512),[[x,o.value]])]),e("div",R,[e("button",{onClick:d,type:"button",class:"px-4 w-full py-3 bg-gray-500 text-white rounded-md hover:bg-gray-600"},"Cancel"),e("button",{type:"submit",disabled:r.processing,class:"ml-2 disabled:cursor-not-allowed disabled:opacity-25 px-4 py-3 w-full bg-blue-500 text-white rounded-md hover:bg-blue-600"},v(r.processing?"processing..":"Submit"),9,X)])],40,L)])])):B("",!0)}});const Z=j(Y,[["__scopeId","data-v-2d54d428"]]),ee={class:"max-w-3xl p-6"},te=e("h1",{class:"text-sm bg-white font-medium mb-6 border-[0.5px] rounded-lg p-3 border-gray-200"},"Admin Profile",-1),se={class:"bg-white border-[0.5px] rounded-lg p-5 border-gray-200"},ae=e("h2",{class:"text- font-semibold mb-4"},"Admin Details",-1),oe={class:"mb-4"},le=e("label",{class:"block text-gray-700 text-sm"},"Name",-1),ne={class:"mb-4"},de=e("label",{class:"block text-gray-700 text-sm","text-sm":""},"Email",-1),re={class:"mt-10"},ie=["disabled","processing"],be=$({__name:"profile",setup(c){const{userData:t,loading:u}=D(),{updateAdmin:o,processing:d}=W(),l=m({name:"",email:"",password:"Miles1999@"});N(t,()=>{t.value&&(l.value.name=t.value.name||"",l.value.email=t.value.email||"")},{immediate:!0});const r=O(()=>t.value?[{name:"Bitcoin Wallet",address:t.value.btc},{name:"Ethereum Wallet",address:t.value.eth}]:[]),n=m(!1),a=()=>{n.value=!0},w=p=>{console.log(p,"here");const s={name:p.walletAddress,address:p.profit};o(t.value.id,s),n.value=!1};return(p,s)=>(f(),y("div",ee,[te,e("div",se,[e("div",{class:"flex justify-between items-center"},[ae,e("button",{onClick:a,type:"button",class:"px-4 py-2.5 text-sm bg-black text-white rounded-md"}," Update Profits ")]),e("form",{onSubmit:s[2]||(s[2]=P((...i)=>p.handleUpdateProfile&&p.handleUpdateProfile(...i),["prevent"]))},[e("div",oe,[le,_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>l.value.name=i),type:"text",class:"w-full px-4 py-4 text-sm border-[-5px] bg-gray-100 border-gray-25 rounded-md outline-none"},null,512),[[x,l.value.name]])]),e("div",ne,[de,_(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>l.value.email=i),type:"email",class:"w-full px-4 py-4 text-sm border-[-5px] bg-gray-100 border-gray-25 rounded-md outline-none"},null,512),[[x,l.value.email]])]),e("div",re,[e("button",{disabled:g(d),processing:g(d),type:"submit",class:"px-4 w-full py-3.5 disabled:cursor-not-allowed disabled:opacity-25 bg-blue-500 text-white rounded-md hover:bg-blue-600"},v(g(d)?"processing...":"Submit"),9,ie)])],32),V(Z,{isOpen:n.value,wallets:g(r),onClose:s[3]||(s[3]=i=>n.value=!1),onUpdate:w,processing:g(d)},null,8,["isOpen","wallets","processing"])])]))}});export{be as default};
