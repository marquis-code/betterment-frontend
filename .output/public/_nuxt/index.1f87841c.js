import{_ as $}from"./Modal.vue.8d7612a5.js";import{r as B,B as A,n as E,o as l,c as i,a as e,x as a,F as M,E as V,y as N,b as j,w as P,t as r,J as D,s as v,v as b,I}from"./entry.fa9cac2e.js";import{u as O}from"./useCurrency.2c762570.js";import{f as L}from"./useDateFormatter.459847c5.js";import{u as q}from"./fetchUsers.ca41b78d.js";import{u as H}from"./user.18d1d1bb.js";function F(){var g,f,d,h,w;const{user:T,token:k}=H(),t=B({}),s=B(!1);return(g=t==null?void 0:t.value)==null||g.name,(f=t==null?void 0:t.value)==null||f.email,(d=t==null?void 0:t.value)==null||d.profit,(h=t==null?void 0:t.value)==null||h.tradingBalance,(w=t==null?void 0:t.value)==null||w.accountBalance,{processing:s,updateAdminUser:async c=>{var u,o,p,m,n,x;s.value=!0;const U=`
      mutation updateUser($userId: String!, $input: UpdateUser!) {
        updateUser(userId: $userId, input: $input) {
          id
          name
          email
          Status
          PlanType
          accountBalance
          tradingBalance
          eth
          btc
          timeAdded
        }
      }
    `;try{const _=await(await fetch("https://clone-better.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${k.value}`},body:JSON.stringify({query:U,variables:{userId:c,input:{name:(u=t==null?void 0:t.value)==null?void 0:u.name,email:(o=t==null?void 0:t.value)==null?void 0:o.email,profit:(p=t==null?void 0:t.value)==null?void 0:p.profit,tradingBalance:(m=t==null?void 0:t.value)==null?void 0:m.tradingBalance,accountBalance:(n=t==null?void 0:t.value)==null?void 0:n.accountBalance}}})})).json();console.log(_,"datta jere"),(x=_==null?void 0:_.errors)!=null&&x.length&&A().$toast.success("Something went wrong",{autoClose:5e3,dangerouslyHTMLString:!0}),_.data&&A().$toast.success("User status was updated successfully",{autoClose:5e3,dangerouslyHTMLString:!0})}finally{s.value=!1}},payload:t,setPayload:c=>{t.value.name=c.name,t.value.email=c.email,t.value.profit=c.profit,t.value.tradingBalance=c.tradingBalance,t.value.accountBalance=c.accountBalance}}}const J={class:"px-4 sm:px-6 lg:px-8"},z=e("div",{class:"sm:flex sm:items-center"},[e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Users"),e("p",{class:"mt-2 text-sm text-gray-700"},"A list of all the users in your account including their name, title, email and role.")])],-1),W={class:"mt-8 flow-root"},G={key:0,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},K={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Q={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},R={class:"min-w-full divide-y divide-gray-300"},X=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-6 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"},"User"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Balances"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Wallets"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Date"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[e("span",{class:"sr-only"},"Edit")])])],-1),Y={class:"divide-y divide-gray-200 bg-white"},Z={class:"whitespace-nowrap py-5 pl-4 pr-3 text-sm sm:pl-0"},ee={class:"flex items-center pl-4"},te=I('<div class="h-11 w-11 flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5.52 19c.64-2.2 1.84-3 3.22-3h6.52c1.38 0 2.58.8 3.22 3"></path><circle cx="12" cy="10" r="3"></circle><circle cx="12" cy="12" r="10"></circle></svg></div>',1),se={class:"ml-4"},ne={class:"font-medium text-gray-900"},ae={class:"mt-1 text-gray-500"},oe={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},le={class:"text-gray-900"},ie={class:"text-gray-900"},ce={class:"mt-1 text-gray-500"},re={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},de={class:"text-gray-900"},ue={key:0},me={key:1},pe={class:"text-gray-900"},xe={key:0},ge={key:1},fe={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},he={class:"relative whitespace-nowrap py-5 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},_e={class:"mr-10"},ve=["onClick"],be={key:1,class:"h-32 w-full bg-slate-100 rounded animate-pulse"},ye={key:2,class:"flex justify-center items-center border py-32 rounded-md"},we={class:"bg-white rounded-lg m-6 lg:w-3/12 max-w-5xl w-full"},Be=e("div",{class:"px-5 py-5"},[e("h4",{class:"font-medium text-gray-800"},"Update User Information")],-1),ke=["onSubmit"],Ue={class:"px-6 space-y-4"},Ne=e("label",{for:"name",class:"block text-xs font-medium leading-6 text-gray-900"},"Name",-1),Ce={class:"mt-1"},Se=e("label",{for:"email",class:"block text-xs font-medium leading-6 text-gray-900"},"Email",-1),Ae={class:"mt-1"},Te=e("label",{for:"profit",class:"block text-xs font-medium leading-6 text-gray-900"},"Profit",-1),$e={class:"mt-1"},Ee=e("label",{for:"trading-balance",class:"block text-xs font-medium leading-6 text-gray-900"},"Trading Balance",-1),Me={class:"mt-1"},Ve=e("label",{for:"account-balance",class:"block text-xs font-medium leading-6 text-gray-900"},"Account Balance",-1),je={class:"mt-1"},Pe={class:"flex justify-between items-center px-4 py-4"},De=["disabled"],Je=E({__name:"index",setup(T){const{updateAdminUser:k,processing:t,payload:s,setPayload:C}=F(),{usersList:y,loading:g}=q(),{formatToDollar:f}=O(),d=B(!1),h=B({}),w=u=>{d.value=!0,h.value=u,s.value=u},c=()=>{d.value=!1},U=()=>{var o,p,m,n,x;const u={name:(o=s==null?void 0:s.value)==null?void 0:o.name,email:(p=s==null?void 0:s.value)==null?void 0:p.email,profit:(m=s==null?void 0:s.value)==null?void 0:m.profit,tradingBalance:(n=s==null?void 0:s.value)==null?void 0:n.tradingBalance,accountBalance:(x=s==null?void 0:s.value)==null?void 0:x.accountBalance};C(u),k(h.value.id).then(S=>{d.value=!1})};return(u,o)=>{var m;const p=$;return l(),i("main",null,[e("div",J,[z,e("div",W,[a(y)&&!a(g)?(l(),i("div",G,[e("div",K,[e("div",Q,[e("table",R,[X,e("tbody",Y,[(l(!0),i(M,null,V(a(y),(n,x)=>(l(),i("tr",{class:"cursor-pointer",key:x},[e("td",Z,[e("div",ee,[te,e("div",se,[e("div",ne,r(n.name??"Nil"),1),e("div",ae,r(n.email??"Nil"),1)])])]),e("td",oe,[e("div",le,r(a(f)(n.accountBalance)??"Nil")+" (account balance)",1),e("div",ie,r(a(f)(n.tradingBalance)??"Nil")+" (trading balance)",1),e("div",ce,r(a(f)(n.profit)??"Nil")+" (profit)",1)]),e("td",re,[e("div",de,[n.eth?(l(),i("span",ue,r(n.eth??"Nil")+" (ETH wallet)",1)):(l(),i("span",me,"Nil"))]),e("div",pe,[n.btc?(l(),i("span",xe,r(n.btc??"Nil")+" (BTC wallet)",1)):(l(),i("span",ge,"Nil"))])]),e("td",fe,r(a(L)(n.timeAdded)??"Nil"),1),e("td",he,[e("div",_e,[e("button",{type:"button",onClick:S=>w(n),class:"border text-white py-2 px-6 rounded-md text-sm bg-green-600"}," Edit ",8,ve)])])]))),128))])])])])])):N("",!0),a(g)?(l(),i("div",be)):N("",!0),!((m=a(y))!=null&&m.length)&&!a(g)?(l(),i("div",ye," Users Not Available ")):N("",!0)])]),j(p,{isOpen:a(d),onClose:c},{default:P(()=>[e("section",we,[Be,e("form",{onSubmit:D(U,["prevent"])},[e("div",Ue,[e("div",null,[Ne,e("div",Ce,[v(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>a(s).name=n),name:"name",id:"name",class:"block w-full rounded-md border-[0.6px] px-3 outline-none font-light py-3 text-gray-900 shadow-sm"},null,512),[[b,a(s).name]])])]),e("div",null,[Se,e("div",Ae,[v(e("input",{type:"email","onUpdate:modelValue":o[1]||(o[1]=n=>a(s).email=n),name:"email",id:"email",class:"block w-full rounded-md border-[0.6px] px-3 outline-none font-light py-3 text-gray-900 shadow-sm"},null,512),[[b,a(s).email]])])]),e("div",null,[Te,e("div",$e,[v(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=n=>a(s).profit=n),name:"profit",id:"profit",class:"block w-full rounded-md border-[0.6px] px-3 outline-none font-light py-3 text-gray-900 shadow-sm"},null,512),[[b,a(s).profit]])])]),e("div",null,[Ee,e("div",Me,[v(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=n=>a(s).tradingBalance=n),name:"trading-balance",id:"trading-balance",class:"block w-full rounded-md border-[0.6px] px-3 outline-none font-light py-3 text-gray-900 shadow-sm"},null,512),[[b,a(s).tradingBalance]])])]),e("div",null,[Ve,e("div",je,[v(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=n=>a(s).accountBalance=n),name:"account-balance",id:"account-balance",class:"block w-full rounded-md border-[0.6px] px-3 outline-none font-light py-3 text-gray-900 shadow-sm"},null,512),[[b,a(s).accountBalance]])])])]),e("div",Pe,[e("button",{type:"button",onClick:o[5]||(o[5]=n=>d.value=!1),class:"rounded-md w-full bg-white px-3 py-2.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:a(t),class:"ml-4 w-full disabled:cursor-not-allowed disabled:opacity-25 inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},r(a(t)?"editing...":"Save"),9,De)])],40,ke)])]),_:1},8,["isOpen"])])}}});export{Je as default};
