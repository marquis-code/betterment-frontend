import{r as y,B as f,n as h,h as _,z as v,o as x,c as w,a as e,J as b,s as c,v as p,x as m,M as U,t as S}from"./entry.8102741e.js";import{u as B}from"./user.655c7c7f.js";import{u as $}from"./useUserInfo.30fb6ddf.js";function M(){const{user:g,token:r}=B(),a=y({}),d=y(!1);return{processing:d,updateUser:async(t,l)=>{var n;d.value=!0;const o=`
      mutation updateUser($userId: String!, $input: UpdateUser!) {
        updateUser(userId: $userId, input: $input) {
          id
          name
          email
          Status
          PlanType
          accountBalance
          tradingBalance
          eth
          btc
          timeAdded
        }
      }
    `;try{const i=await(await fetch("https://clone-better.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${r.value}`},body:JSON.stringify({query:o,variables:{userId:t,input:l}})})).json();console.log(i,"datta jere"),(n=i==null?void 0:i.errors)!=null&&n.length&&f().$toast.success("Something went wrong",{autoClose:5e3,dangerouslyHTMLString:!0}),i.data&&f().$toast.success("User status was updated successfully",{autoClose:5e3,dangerouslyHTMLString:!0})}finally{d.value=!1}},payload:a,setPayload:t=>{a.value.name=t.name,a.value.email=t.email,a.value.profit=t.profit,a.value.tradingBalance=t.tradingBalance,a.value.accountBalance=t.accountBalance}}}const P={class:"lg:flex justify-start items-start gap-x-10 space-y-10 lg:space-y-0"},T={class:"bg-white lg:w-5/12 rounded-md border"},D=e("p",{class:"border-b pl-6 py-4 text-sm font-semibold"}," Keep Your Profile Up-To-Date ",-1),j=["onSubmit"],C={class:"space-y-1"},I=e("label",{class:"text-xs text-gray-700 font-medium"},"Name",-1),N=e("span",{class:"text-xs text-gray-500"},"We'll never share your details with anyone else",-1),k={class:"space-y-1"},q=e("label",{class:"text-xs text-gray-700 font-medium"},"Email address:",-1),z=e("span",{class:"text-xs text-gray-500"},"We'll never share your details with anyone else",-1),W={class:"space-y-1"},A=e("label",{class:"text-xs text-gray-700 font-medium"},"Password:",-1),E=e("span",{class:"text-xs text-gray-500"},"We'll never share your details with anyone else",-1),H={class:"w-full"},J=["disabled"],Y=h({__name:"profile",setup(g){const{processing:r,updateUser:a}=M(),{loading:d,userData:u}=$(),s=y({name:"",email:"",password:""});_(u,l=>{l&&(s.value={name:l.name,email:l.email,password:""})},{immediate:!0});const t=()=>{u.value&&a(u.value.id,s.value)};return v(()=>/\S+@\S+\.\S+/.test(s.value.email)),(l,o)=>(x(),w("main",P,[e("section",T,[D,e("form",{class:"p-10 space-y-6",onSubmit:b(t,["prevent"])},[e("div",C,[I,c(e("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>s.value.name=n),type:"text",class:"py-2 border rounded-md w-full outline-none pl-6"},null,512),[[p,s.value.name]]),N]),e("div",k,[q,c(e("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>s.value.email=n),type:"email",class:"py-2 border rounded-md w-full outline-none pl-6"},null,512),[[p,s.value.email]]),z]),e("div",W,[A,c(e("input",{"onUpdate:modelValue":o[2]||(o[2]=n=>s.value.password=n),type:"password",class:"py-2 border rounded-md w-full outline-none pl-6"},null,512),[[p,s.value.password]]),E]),e("div",H,[e("button",{type:"submit",disabled:m(r),class:U([[m(r)?"opacity-25 cursor-not-allowed":null],"bg-green-500 w-full disabled:cursor-not-allowed disabled:opacity-25 text-white rounded-lg px-6 py-3 text-sm"])},S(m(r)?"processing...":"Update"),11,J)])],40,j)])]))}});export{Y as default};
