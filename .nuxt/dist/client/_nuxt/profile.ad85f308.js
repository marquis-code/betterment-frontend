import{r as m,B as S,n as $,o as y,c as _,a as e,J as k,s as h,K as B,F as A,E as C,v as U,t as g,y as j,p as O,e as I,_ as N,h as T,z as V,x as a,b as q}from"./entry.d021d1c2.js";import{u as M}from"./user.d31346c8.js";import{u as D}from"./useUserInfo.59402a95.js";function W(){const{token:p}=M(),t=m(!1),u=m(null);return{processingProfitUpdate:t,updateProfitStatus:u,handleProfitUpdate:async()=>{t.value=!0;const d=`
      mutation {
        updateProfits
      }
    `;try{const s=await(await fetch("https://clone-better.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${p.value}`},body:JSON.stringify({query:d})})).json();s!=null&&s.errors?console.error(s.errors[0].message):u.value=s.data.updateProfits}finally{t.value=!1}}}}function z(){const{user:p,token:t}=M(),u=m({}),n=m(!1);return{processing:n,updateAdmin:async(b,s)=>{var c;n.value=!0;const{id:o,Status:r,timeAdded:f,PlanType:P,...x}=s.value,w=`
      mutation updateUser($userId: String!, $input: UpdateUser!) {
        updateUser(userId: $userId, input: $input) {
          id
          name
          email
          Status
          PlanType
          accountBalance
          tradingBalance
          tradingBalance
          eth
          btc
          timeAdded
        }
      }
    `;try{const l=await(await fetch("https://clone-better.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${t.value}`},body:JSON.stringify({query:w,variables:{userId:b,input:x}})})).json();console.log(l,"datta jere"),(c=l==null?void 0:l.errors)!=null&&c.length&&S().$toast.success("Something went wrong",{autoClose:5e3,dangerouslyHTMLString:!0}),l.data&&S().$toast.success("User status was updated successfully",{autoClose:5e3,dangerouslyHTMLString:!0})}finally{n.value=!1}},payload:u}}const v=p=>(O("data-v-2d54d428"),p=p(),I(),p),E={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},J={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},L=v(()=>e("h2",{class:"text- font-semibold"},"Update Wallet Profits",-1)),F=["onSubmit"],H={class:"mt-4 space-y-1"},K=v(()=>e("label",{class:"block text-gray-700 text-sm"},"Select Wallet",-1)),G=v(()=>e("option",{disabled:"",value:""},"Choose a wallet",-1)),Q=["value"],R={class:"mt-4 space-y-1"},X=v(()=>e("label",{class:"block text-gray-700 text-sm"},"New Profit",-1)),Y={class:"flex justify-end mt-10"},Z=["disabled"],ee=$({__name:"UpdateProfitsModal",props:{isOpen:{type:Boolean},processing:{type:Boolean},wallets:{}},emits:["close","update"],setup(p,{emit:t}){const u=m(""),n=m(null),d=()=>{t("close")},b=()=>{if(!u.value||!n.value){alert("Please select a wallet and enter a profit amount.");return}console.log(),t("update",{walletAddress:u.value,profit:n.value}),d()};return(s,o)=>s.isOpen?(y(),_("div",E,[e("div",J,[e("div",{class:"flex justify-between items-center"},[L,e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},"Ã—")]),e("form",{onSubmit:k(b,["prevent"])},[e("div",H,[K,h(e("select",{"onUpdate:modelValue":o[0]||(o[0]=r=>u.value=r),class:"w-full px-4 py-3.5 text-sm bg-gray-100 outline-none border rounded-md"},[G,(y(!0),_(A,null,C(s.wallets,r=>(y(),_("option",{key:r.address,value:r.address},g(r.name)+" ("+g(r.address)+") ",9,Q))),128))],512),[[B,u.value]])]),e("div",R,[X,h(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>n.value=r),type:"number",class:"w-full px-4 py-3.5 text-sm bg-gray-100 outline-none border rounded-md"},null,512),[[U,n.value]])]),e("div",Y,[e("button",{onClick:d,type:"button",class:"px-4 w-full py-3 bg-gray-500 text-white rounded-md hover:bg-gray-600"},"Cancel"),e("button",{type:"submit",disabled:s.processing,class:"ml-2 disabled:cursor-not-allowed disabled:opacity-25 px-4 py-3 w-full bg-blue-500 text-white rounded-md hover:bg-blue-600"},g(s.processing?"processing..":"Submit"),9,Z)])],40,F)])])):j("",!0)}});const te=N(ee,[["__scopeId","data-v-2d54d428"]]),se={class:"max-w-3xl p-2"},oe=e("h1",{class:"text-sm bg-white font-medium mb-6 border-[0.5px] rounded-lg p-3 border-gray-200"},"Admin Profile",-1),ae={class:"bg-white border-[0.5px] rounded-lg p-5 border-gray-200"},ne={class:"flex justify-between items-center"},le=e("h2",{class:"text- font-semibold mb-4"},"Admin Details",-1),de=["disabled"],re=["onSubmit"],ie={class:"mb-4"},ue=e("label",{class:"block text-gray-700 text-sm"},"Name",-1),ce={class:"mb-4"},pe=e("label",{class:"block text-gray-700 text-sm","text-sm":""},"Email",-1),me={class:"mt-10"},be=["disabled","processing"],_e=$({__name:"profile",setup(p){const{userData:t,loading:u}=D(),{updateAdmin:n,processing:d}=z(),{handleProfitUpdate:b,processingProfitUpdate:s}=W(),o=m({name:"",email:"",password:"Miles1999@"});T(t,()=>{t.value&&(o.value.name=t.value.name||"",o.value.email=t.value.email||"")},{immediate:!0});const r=V(()=>t.value?[{name:"Bitcoin Wallet",address:t.value.btc},{name:"Ethereum Wallet",address:t.value.eth}]:[]),f=m(!1),P=()=>{f.value=!0},x=c=>{console.log(c,"here");const i={name:c.walletAddress,address:c.profit};n(t.value.id,i),f.value=!1},w=()=>{const c={name:o.value.name,email:o.value.email};n(c)};return(c,i)=>(y(),_("div",se,[oe,e("div",ae,[e("div",ne,[le,e("button",{onClick:P,type:"button",class:"px-4 py-2 text-sm bg-black text-white rounded-md"}," Update wallet Profits "),e("button",{disabled:a(s),onClick:i[0]||(i[0]=(...l)=>a(b)&&a(b)(...l)),type:"button",class:"px-4 disabled:cursor-not-allowed disabled:opacity-25 py-2 text-sm bg-black text-white rounded-md"},g(a(s)?"processing...":"Update Profits"),9,de)]),e("form",{onSubmit:k(w,["prevent"])},[e("div",ie,[ue,h(e("input",{"onUpdate:modelValue":i[1]||(i[1]=l=>a(o).name=l),type:"text",class:"w-full px-4 py-4 text-sm border-[-5px] bg-gray-100 border-gray-25 rounded-md outline-none"},null,512),[[U,a(o).name]])]),e("div",ce,[pe,h(e("input",{"onUpdate:modelValue":i[2]||(i[2]=l=>a(o).email=l),type:"email",class:"w-full px-4 py-4 text-sm border-[-5px] bg-gray-100 border-gray-25 rounded-md outline-none"},null,512),[[U,a(o).email]])]),e("div",me,[e("button",{disabled:a(d),processing:a(d),type:"submit",class:"px-4 w-full py-3.5 disabled:cursor-not-allowed disabled:opacity-25 bg-blue-500 text-white rounded-md hover:bg-blue-600"},g(a(d)?"processing...":"Submit"),9,be)])],40,re),q(te,{isOpen:a(f),wallets:a(r),onClose:i[3]||(i[3]=l=>f.value=!1),onUpdate:x,processing:a(d)},null,8,["isOpen","wallets","processing"])])]))}});export{_e as default};
