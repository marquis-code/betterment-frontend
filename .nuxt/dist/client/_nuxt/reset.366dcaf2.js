import{r as c,u as w,n as _,z as y,q as f,o as g,c as h,a as e,J as b,s as p,v as m,x as o,M as x,t as v}from"./entry.8102741e.js";import{_ as P}from"./logo.87208d9f.js";function C(){const a=c(!1),n=w();return{processing:a,resetPassword:async r=>{a.value=!0;const s=`
      mutation resetPassword($email: String!, $newPassword: String!, $resetCode: String!) {
        resetPassword(email: $email, newPassword: $newPassword, resetCode: $resetCode)
      }
    `;try{const t=await(await fetch("https://clone-better.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:s,variables:{email:r.email,newPassword:r.password,resetCode:r.resetCode}})})).json();t!=null&&t.errors?console.error(t.errors[0].message):(localStorage.removeItem("user-email"),n.push("/login"))}finally{a.value=!1}}}}const S={class:"h-screen"},k={class:"flex justify-center items-center pt-20 container mx-auto"},$={class:"w-full max-w-md p-8 space-y-6 rounded-xl bg-white"},M=e("img",{class:"h-10 w-auto pl-9",src:P,alt:"Your Company"},null,-1),q=e("h1",{class:"text-3xl font-bold"},"Almost Done!",-1),N=e("p",{class:"text-gray-500 text-sm leading-loose"}," Please enter your reset password token and your new password. ",-1),j=["onSubmit"],B={class:"space-y-1 text-sm w-full"},D=e("label",{for:"token",class:"block text-gray-900 font-medium"},"Token",-1),J={class:"space-y-1 text-sm w-full"},O=e("label",{for:"password",class:"block text-gray-900 font-medium"},"New Password",-1),R={class:"w-full"},T=["disabled"],I=_({__name:"reset",setup(a){const{processing:n,resetPassword:u}=C(),r=c(""),s=c({resetCode:"",email:"",password:""}),d=y(()=>!!(s.value.password&&s.value.resetCode)),t=()=>{u(s.value)};return f(()=>{r.value=JSON.parse(window.localStorage.getItem("user-email"))}),(V,l)=>(g(),h("div",S,[e("section",k,[e("div",$,[M,q,N,e("form",{class:"space-y-10",onSubmit:b(t,["prevent"])},[e("div",B,[D,p(e("input",{id:"token","onUpdate:modelValue":l[0]||(l[0]=i=>o(s).resetCode=i),type:"tel",name:"token",placeholder:"email",class:"border w-full outline-none px-4 py-3 rounded-md border-gray-900 text-gray-900"},null,512),[[m,o(s).resetCode]])]),e("div",J,[O,p(e("input",{id:"password","onUpdate:modelValue":l[1]||(l[1]=i=>o(s).password=i),type:"password",name:"password",placeholder:"password",class:"border w-full outline-none px-4 py-3 rounded-md border-gray-900 text-gray-900"},null,512),[[m,o(s).password]])]),e("div",R,[e("button",{disabled:!o(d),class:x([[!o(d)||o(n)?"opacity-25 cursor-not-allowed":""],"w-full shrink-0 text-xs disabled:cursor-not-allowed disabled:opacity-25 rounded-md border border-green-500 bg-green-600 px-12 py-3 font-medium text-white transition"])},v(o(n)?"processing...":"Submit"),11,T)])],40,j)])])]))}});export{I as default};
