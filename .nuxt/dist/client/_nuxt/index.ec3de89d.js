import{r as D,n as H,L as O,A as V,q as E,o as s,c as o,a as t,M as C,x as n,F as S,E as B,y as a,p as F,e as J,t as r,_ as W}from"./entry.50b5a30e.js";import{u as Y}from"./useCurrency.2c762570.js";import{f as T}from"./useDateFormatter.459847c5.js";import{u as Q}from"./useTransactionHistory.a2084b58.js";import{u as U}from"./user.3a31c8fb.js";import{S as k}from"./sweetalert2.all.fdb4cd9f.js";function K(){const i=D(!1),{token:v}=U();return{processing:i,processTransaction:async(g,_)=>{i.value=!0;const N=_==="approve"?"Approved":_==="reject"?"Declined":"Pending",A=`
      mutation ProcessTransaction($transactionID: String!, $status: TransactionStatus!) {
        processTransaction(transactionID: $transactionID, status: $status)
      }
    `;try{const y=await(await fetch("https://clone-better.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${v.value}`},body:JSON.stringify({query:A,variables:{transactionID:g,status:N}})})).json();y!=null&&y.errors?console.error(y.errors[0].message):console.log(`You have successfully ${_==="approve"?"Approved":"Rejected"} this transaction.`)}finally{i.value=!1}}}}const l=i=>(F("data-v-8427d312"),i=i(),J(),i),X={class:""},Z=l(()=>t("div",{class:"sm:flex sm:items-center"},[t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Transactions"),t("p",{class:"mt-2 text-sm text-gray-700"},"A list of all your account transactions, their name, balance, status, and amount.")])],-1)),tt={class:"border-[0.7px] bg-gray-50 border-gray-500 rounded-md py-1 px-3"},et={class:"border-b border-gray-200"},st={class:"-mb-px flex space-x-8","aria-label":"Tabs"},ot=l(()=>t("svg",{class:"-ml-0.5 mr-2 h-5 w-5 text-gray-400 group-hover:text-gray-500",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z"})],-1)),nt=l(()=>t("span",null,"All",-1)),at=[ot,nt],rt=l(()=>t("svg",{class:"-ml-0.5 mr-2 h-5 w-5 text-gray-400 group-hover:text-gray-500",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z"})],-1)),lt=l(()=>t("span",null,"Deposits",-1)),ct=[rt,lt],dt=l(()=>t("svg",{class:"-ml-0.5 mr-2 h-5 w-5 text-gray-400 group-hover:text-gray-500",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M4 16.5v-13h-.25a.75.75 0 010-1.5h12.5a.75.75 0 010 1.5H16v13h.25a.75.75 0 010 1.5h-3.5a.75.75 0 01-.75-.75v-2.5a.75.75 0 00-.75-.75h-2.5a.75.75 0 00-.75.75v2.5a.75.75 0 01-.75.75h-3.5a.75.75 0 010-1.5H4zm3-11a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zM7.5 9a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1zM11 5.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm.5 3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1z","clip-rule":"evenodd"})],-1)),it=l(()=>t("span",null,"Withdrawals",-1)),pt=[dt,it],ut={class:"mt-2 flow-root px-8 border border-b-500"},xt={key:0,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},ht={key:0,class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},gt={class:"min-w-full divide-y divide-gray-300"},_t=l(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"},"Name"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Balances"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Amount"),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},"Date")])],-1)),yt={class:"divide-y divide-gray-200 bg-white"},mt={class:"whitespace-nowrap py-5 pl-4 pr-3 text-sm sm:pl-0"},ft={class:"flex items-center"},vt={class:"h-11 w-11 flex-shrink-0"},bt=["src"],wt={class:"ml-4"},kt={class:"font-medium text-gray-900"},Nt={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},At={class:"text-gray-900"},Ct={class:"mt-1 text-gray-500"},St={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},Bt={key:0,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20"},Tt={key:1,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20"},Dt={key:2,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},$t={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},jt={class:"relative whitespace-nowrap py-5 pl-3 text-right text-sm font-medium"},Pt={class:"relative whitespace-nowrap py-5 pl-3 text-right text-sm font-medium"},zt={key:0,class:"space-x-3"},Mt=["onClick"],qt=["onClick"],It={key:1,class:"border disabled: cursor-not-allowed opacity-25 text-sm rounded-lg px-4 bg-red-500 text-white font-medium py-1.5"},Rt={key:1,class:"flex justify-center items-center border py-32 rounded-md"},Gt={key:1,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Lt={key:0,class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Ht={class:"min-w-full divide-y divide-gray-300"},Ot=l(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"},"Name"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Balances"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Amount"),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},"Date")])],-1)),Vt={class:"divide-y divide-gray-200 bg-white"},Et={class:"whitespace-nowrap py-5 pl-4 pr-3 text-sm sm:pl-0"},Ft={class:"flex items-center"},Jt={class:"h-11 w-11 flex-shrink-0"},Wt=["src"],Yt={class:"ml-4"},Qt={class:"font-medium text-gray-900"},Ut={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},Kt={class:"text-gray-900"},Xt={class:"mt-1 text-gray-500"},Zt={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},te={key:0,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20"},ee={key:1,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20"},se={key:2,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},oe={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},ne={class:"relative whitespace-nowrap py-5 pl-3 text-right text-sm font-medium"},ae={class:"relative whitespace-nowrap py-5 pl-3 text-right text-sm font-medium"},re={key:0,class:"space-x-3"},le=["onClick"],ce=["onClick"],de={key:1,class:"border disabled: cursor-not-allowed opacity-25 text-sm rounded-lg px-4 bg-red-500 text-white font-medium py-1.5"},ie={key:1,class:"flex justify-center items-center border py-32 rounded-md"},pe={key:2,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},ue={key:0,class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},xe={class:"min-w-full divide-y divide-gray-300"},he=l(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"},"Name"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Balances"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Amount"),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},"Date"),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},"Actions")])],-1)),ge={class:"divide-y divide-gray-200 bg-white"},_e={class:"whitespace-nowrap py-5 pl-4 pr-3 text-sm sm:pl-0"},ye={class:"flex items-center"},me={class:"h-11 w-11 flex-shrink-0"},fe=["src"],ve={class:"ml-4"},be={class:"font-medium text-gray-900"},we={class:"font-medium text-gray-900"},ke={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},Ne={class:"text-gray-900"},Ae={class:"mt-1 text-gray-500"},Ce={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},Se={key:0,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20"},Be={key:1,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20"},Te={key:2,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},De={class:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},$e={class:"relative whitespace-nowrap py-5 pl-3 text-right text-sm font-medium"},je={class:"relative whitespace-nowrap py-5 pl-3 text-right text-sm font-medium"},Pe={key:0,class:"space-x-3"},ze=["onClick"],Me=["onClick"],qe={key:1,class:"border disabled: cursor-not-allowed opacity-25 text-sm rounded-lg px-4 bg-red-500 text-white font-medium py-1.5"},Ie={key:1,class:"flex justify-center items-center border py-32 rounded-md"},Re={key:3,class:"h-32 mt-10 w-full bg-slate-100 rounded animate-pulse"},Ge=H({__name:"index",setup(i){const{formatToDollar:v}=Y(),{loading:p,transactionsList:g,depositTransactions:_,withdrawalTransactions:N}=Q(),{processTransaction:A,processing:I}=K(),y=O(),R=V(),c=D("all"),G=D("deposit");E(()=>{y.query.type!=="deposit"&&R.replace({query:{...y.query,type:G.value}})});const m=($,d)=>{k.fire({icon:"question",title:`${d==="approve"?"Approve":"Reject"} Deposit`,text:"Are you sure you want to remove this story",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Proceed!",cancelButtonText:"Nah, Just kidding",preConfirm:async()=>await A($.id,d).catch(u=>{const w=u.response&&u.response.data?u.response.data.message:"An error occurred, please try again.";k().showValidationMessage(w)}),allowOutsideClick:()=>!k.isLoading()}).then(async u=>{u.isConfirmed&&k.fire({icon:"success",title:"Success",text:"Action successful!",showCloseButton:!0})})};return($,d)=>{var u,w,j,P,z,M;return s(),o("main",null,[t("div",X,[Z,t("div",tt,[t("div",et,[t("nav",st,[t("button",{onClick:d[0]||(d[0]=e=>c.value="all"),class:C([{"border-indigo-500 text-indigo-600":n(c)==="all"},"group inline-flex px-6 border-gray-500 border items-center border-b-2 border-transparent py-3 rounded-md text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"])},at,2),t("button",{onClick:d[1]||(d[1]=e=>c.value="deposits"),class:C([{"border-indigo-500 text-indigo-600":n(c)==="deposits"},"group px-6 inline-flex border-gray-500 border items-center border-b-2 border-transparent py-3 rounded-md text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"])},ct,2),t("button",{onClick:d[2]||(d[2]=e=>c.value="withdrawals"),class:C([{"border-indigo-500 text-indigo-600":n(c)==="withdrawals"},"group px-6 inline-flex border-gray-500 border items-center border-b-2 border-transparent py-3 rounded-md text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"])},pt,2)])])]),t("div",ut,[n(c)==="withdrawals"?(s(),o("div",xt,[(u=n(g))!=null&&u.length&&!n(p)?(s(),o("div",ht,[t("table",gt,[_t,t("tbody",yt,[(s(!0),o(S,null,B(n(N),(e,b)=>{var x,h;return s(),o("tr",{key:b},[t("td",mt,[t("div",ft,[t("div",vt,[t("img",{class:"h-11 w-11 rounded-full",src:e==null?void 0:e.proof,alt:""},null,8,bt)]),t("div",wt,[t("div",kt,r((e==null?void 0:e.wallet)||"Nil"),1)])])]),t("td",Nt,[t("div",At,"NGN "+r(((x=e==null?void 0:e.user)==null?void 0:x.accountBalance)??"Nil")+" (Account Balance)",1),t("div",Ct,"NGN "+r(((h=e==null?void 0:e.user)==null?void 0:h.tradingBalance)??"Nil")+" (Card Balance)",1)]),t("td",St,[e.transactionStatus==="Pending"?(s(),o("span",Bt,"Pending")):a("",!0),e.transactionStatus==="Declined"?(s(),o("span",Tt,"Declined")):a("",!0),e.transactionStatus==="Approved"?(s(),o("span",Dt,"Approved")):a("",!0)]),t("td",$t,r(n(v)(e==null?void 0:e.amount)??"Nil"),1),t("td",jt,r(n(T)(e==null?void 0:e.timeAdded)??"Nil"),1),t("td",Pt,[e.transactionStatus==="Pending"?(s(),o("div",zt,[t("button",{class:"border text-sm rounded-lg px-4 bg-green-500 text-white font-medium py-1.5",onClick:f=>m(e,"approve")},"Accept",8,Mt),t("button",{class:"border text-sm rounded-lg px-4 bg-red-500 text-white font-medium py-1.5",onClick:f=>m(e,"reject")},"Rejected",8,qt)])):(s(),o("button",It,r(e.transactionStatus),1))])])}),128))])])])):a("",!0),!((w=n(g))!=null&&w.length)&&!n(p)?(s(),o("div",Rt," No Withdrawal Transactions Available ")):a("",!0)])):a("",!0),n(c)==="deposits"?(s(),o("div",Gt,[(j=n(_))!=null&&j.length&&!n(p)?(s(),o("div",Lt,[t("table",Ht,[Ot,t("tbody",Vt,[(s(!0),o(S,null,B(n(_),(e,b)=>{var x,h;return s(),o("tr",{key:b},[t("td",Et,[t("div",Ft,[t("div",Jt,[t("img",{class:"h-11 w-11 rounded-full",src:e==null?void 0:e.proof,alt:""},null,8,Wt)]),t("div",Yt,[t("div",Qt,r((e==null?void 0:e.wallet)||"Nil"),1)])])]),t("td",Ut,[t("div",Kt,"NGN "+r(((x=e==null?void 0:e.user)==null?void 0:x.accountBalance)??"Nil")+" (Account Balance)",1),t("div",Xt,"NGN "+r(((h=e==null?void 0:e.user)==null?void 0:h.tradingBalance)??"Nil")+" (Card Balance)",1)]),t("td",Zt,[e.transactionStatus==="Pending"?(s(),o("span",te,"Pending")):a("",!0),e.transactionStatus==="Declined"?(s(),o("span",ee,"Declined")):a("",!0),e.transactionStatus==="Approved"?(s(),o("span",se,"Approved")):a("",!0)]),t("td",oe,r(n(v)(e==null?void 0:e.amount)??"Nil"),1),t("td",ne,r(n(T)(e==null?void 0:e.timeAdded)??"Nil"),1),t("td",ae,[e.transactionStatus==="Pending"?(s(),o("div",re,[t("button",{class:"border text-sm rounded-lg px-4 bg-green-500 text-white font-medium py-1.5",onClick:f=>m(e,"approve")},"Accept",8,le),t("button",{class:"border text-sm rounded-lg px-4 bg-red-500 text-white font-medium py-1.5",onClick:f=>m(e,"reject")},"Rejected",8,ce)])):(s(),o("button",de,r(e.transactionStatus),1))])])}),128))])])])):a("",!0),!((P=n(_))!=null&&P.length)&&!n(p)?(s(),o("div",ie," No Deposit Transactions Available ")):a("",!0)])):a("",!0),n(c)==="all"?(s(),o("div",pe,[(z=n(g))!=null&&z.length&&!n(p)?(s(),o("div",ue,[t("table",xe,[he,t("tbody",ge,[(s(!0),o(S,null,B(n(g),(e,b)=>{var x,h,f,q;return s(),o("tr",{key:b},[t("td",_e,[t("div",ye,[t("div",me,[t("img",{class:"h-11 w-11 rounded-full",src:e==null?void 0:e.proof,alt:""},null,8,fe)]),t("div",ve,[t("div",be,r(((x=e==null?void 0:e.user)==null?void 0:x.name)||"Nil"),1),t("div",we,r(((h=e==null?void 0:e.user)==null?void 0:h.email)||"Nil"),1)])])]),t("td",ke,[t("div",Ne,"NGN "+r(((f=e==null?void 0:e.user)==null?void 0:f.accountBalance)??"Nil")+" (Account Balance)",1),t("div",Ae,"NGN "+r(((q=e==null?void 0:e.user)==null?void 0:q.tradingBalance)??"Nil")+" (Card Balance)",1)]),t("td",Ce,[e.transactionStatus==="Pending"?(s(),o("span",Se,"Pending")):a("",!0),e.transactionStatus==="Declined"?(s(),o("span",Be,"Declined")):a("",!0),e.transactionStatus==="Approved"?(s(),o("span",Te,"Approved")):a("",!0)]),t("td",De,r(n(v)(e==null?void 0:e.amount)??"Nil"),1),t("td",$e,r(n(T)(e==null?void 0:e.timeAdded)??"Nil"),1),t("td",je,[e.transactionStatus==="Pending"?(s(),o("div",Pe,[t("button",{class:"border text-sm rounded-lg px-4 bg-green-500 text-white font-medium py-1.5",onClick:L=>m(e,"approve")},"Accept",8,ze),t("button",{class:"border text-sm rounded-lg px-4 bg-red-500 text-white font-medium py-1.5",onClick:L=>m(e,"reject")},"Rejected",8,Me)])):(s(),o("button",qe,r(e.transactionStatus),1))])])}),128))])])])):a("",!0),!((M=n(g))!=null&&M.length)&&!n(p)?(s(),o("div",Ie," Transactions Not Available ")):a("",!0)])):a("",!0),n(p)?(s(),o("div",Re)):a("",!0)])])])}}});const Je=W(Ge,[["__scopeId","data-v-8427d312"]]);export{Je as default};
